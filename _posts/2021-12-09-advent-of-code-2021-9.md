---
layout: post
title: "Advent of code 2021: Day 9"
problem_type: aoc2021
problem: 9
complexity: 2
---

**Part 1**
I receive an input file with a height map about "lava tubes". The goal here is to determine the low points of the height map. A low point is defined as a point to which the surrounding points are all higher than said point. We only have to consider the horizontal and vertical surrounding points. An example is presented:

```
2199943210
3987894921
9856789892
8767896789
9899965678
```

The puzzle explains that there are 4 low points in this example. The 1 at position `0,1`, the 0 at position `0,9`, the 5 at position `2,2` and the 5 at position `4,6`.

The risk level is the sum of each low point + 1. Determine the risk level of the input file.

The first part is determining the low points:

```rust
fn get_points(grid: &Vec<Vec<i32>>, y: usize, x: usize) -> Vec<i32> {
    let directions = vec![(1, 0), (0, -1), (0, 1), (-1, 0)];

    directions.iter().map(|(dy, dx)| {
        let temp = vec![];
        let y = y as i32 + dy;
        let x = x as i32 + dx;
        let y_row = grid.get(y as usize).unwrap_or(&temp);

        *y_row.get(x as usize).unwrap_or(&10)
    }).collect()
}

fn low_points(heightmap: &Vec<Vec<i32>>) -> i32 {
    let grid_height = heightmap.len();
    let grid_width = heightmap[0].len();
    let mut low_points = vec![];
    let mut total_sum = 0;

    for y in 0..grid_height {
        for x in 0..grid_width {
            let current_min = heightmap[y as usize][x as usize];
            let surrounded: i32 = *get_points(&heightmap, y, x)
                .iter()
                .min()
                .unwrap();

            if current_min < surrounded {
                total_sum += (current_min + 1)
            }
        }
    }

    total_sum
}
```

I have to take into account the fact that an edge point is missing some surrounding points, so I'll assume those values are all the height of `10` to make them reasonably higher than the would-be minimum.

**Part 2**
The next part is where things get slightly more tricky. Each low point, is part of a basin. Calculate the total area of each basin (each basin is surrounded by 9's, as those are the highest points and are not part of the basin). Multiply the 3 largest basin sizes.

The way I approached this problem is by taking the coordinates of a low point, look at the surrounding area, add the surrounding coordinates to a list which aren't edges or 9's. For each point added to the list, do the same trick again for these new points, remove the duplicates from the point list and repeat until no more new points found. I was struggling a bit with setting this up, and there were a few improvements over time. Unfortunately, I didn't really document my steps that well, so I only have the final code, which you can find below in the GitHub link.

Perhaps I'll revisit this some time later, because I do think we can do without the duplication removal of the point list.
